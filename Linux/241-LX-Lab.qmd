# ğŸ› ï¸ Laboratorio: AdministraciÃ³n de Servicios - Monitoreo en Amazon Linux 2

> **DuraciÃ³n estimada:** 30 minutos  
> **Prerrequisitos:** Haber completado laboratorios previos y conocer el uso bÃ¡sico de EC2, SSH y la consola AWS.

## ğŸ¯ Objetivos

- Verificar el estado del servicio **httpd** en una instancia EC2.
- Probar conectividad HTTP vÃ­a IP pÃºblica.
- Monitorear la instancia EC2 utilizando:
  - El comando `top` de Linux.
  - El servicio **AWS CloudWatch**.

## ğŸ” Acceso al laboratorio

1. Haz clic en **Start Lab**.
2. Espera a que el estado indique: `Lab status: ready`.
3. Cierra el panel y accede a la **AWS Management Console**.

## ğŸ§© Tarea 1: ConexiÃ³n a EC2 vÃ­a SSH

### ğŸ”· Usuarios Windows

- Descarga el archivo `.ppk` desde **Details > Download PPK**.
- Anota la **IP pÃºblica** de la instancia.
- Usa **PuTTY** con esta configuraciÃ³n:
  - Host: `Public IP`
  - Auth: cargar archivo `labsuser.ppk`
  - Usuario: `ec2-user`
  - Keepalives: `30 segundos`

### ğŸ”· Usuarios macOS / Linux

```bash
# 1. Ir al directorio de descarga
cd ~/Downloads

# 2. Cambiar permisos
chmod 400 labsuser.pem

# 3. Conectarse vÃ­a SSH
ssh -i labsuser.pem ec2-user@<public-ip>
```

## âš™ï¸ Tarea 2: Verificar y controlar el servicio HTTPD

### ğŸ”¸ Ver estado del servicio

```bash
sudo systemctl status httpd.service
```

**Resultado esperado:** `inactive (dead)`

### ğŸ”¸ Iniciar el servicio

```bash
sudo systemctl start httpd.service
```

Verifica nuevamente:

```bash
sudo systemctl status httpd.service
```

**Resultado esperado:** `active (running)`

### ğŸ”¸ Probar el servidor web

En el navegador:  
`http://<IP-pÃºblica>`

DeberÃ­as ver la pÃ¡gina de prueba de Apache.

### ğŸ”¸ Detener el servicio

```bash
sudo systemctl stop httpd.service
```

## ğŸ“Š Tarea 3: Monitoreo de la instancia EC2

### ğŸ”¸ Ver procesos y carga actual

```bash
top
```

Pulsa `Q` para salir.

### ğŸ”¸ Simular carga en CPU

```bash
./stress.sh & top
```

- Observa el alto uso de CPU en tiempo real.

### ğŸ”¸ Acceder a AWS CloudWatch

1. En la consola AWS, busca `CloudWatch`.
2. Ve a: **Dashboards > Automatic dashboards > EC2**
3. Observa mÃ©tricas:
   - UtilizaciÃ³n de CPU
   - Lecturas/escrituras de disco

### ğŸ”¸ Esperar 5 minutos

> AWS CloudWatch actualiza cada 5 minutos.  
Revisa que la CPU haya bajado luego del script.

## ğŸ FinalizaciÃ³n

Haz clic en **End Lab** y confirma con **Yes**.  
Cierra el mensaje de eliminaciÃ³n.

## ğŸ“˜ Conceptos Core

- **EC2 (Elastic Compute Cloud):** Servicio de cÃ³mputo de AWS.
- **httpd:** Servidor web Apache.
- **systemctl:** Herramienta de control de servicios en Linux.
- **top:** Monitor en tiempo real de procesos.
- **CloudWatch:** Herramienta de monitoreo en AWS.

## âŒ¨ï¸ Comandos clave (keyboardas)

```bash
# ConexiÃ³n SSH
ssh -i labsuser.pem ec2-user@<public-ip>

# Servicio httpd
sudo systemctl status httpd.service
sudo systemctl start httpd.service
sudo systemctl stop httpd.service

# Monitor de procesos
top

# Carga artificial de CPU
./stress.sh & top
```
